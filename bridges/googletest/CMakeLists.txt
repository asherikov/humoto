set(TGT_GOOGLETEST  "${BRIDGE_TARGET_PREFIX}_${HUMOTO_BRIDGE}")
set(GOOGLETEST_DIR  "${CMAKE_CURRENT_LIST_DIR}/googletest")

set(GOOGLETEST_ARGS
    ${BRIDGES_ARGS}
    -DBUILD_GMOCK=OFF
    -DBUILD_GTEST=ON
    -Dgtest_disable_pthreads=ON
    "-DCMAKE_CXX_FLAGS=-fPIC")

if(HUMOTO_COPY_CXX_FLAGS_TO_C_FLAGS)
    set(GOOGLETEST_ARGS
        ${GOOGLETEST_ARGS}
        "-DCMAKE_C_FLAGS=-fPIC")
endif(HUMOTO_COPY_CXX_FLAGS_TO_C_FLAGS)

humoto_add_external_git_project(TARGET_NAME "${TGT_GOOGLETEST}"
                                PROJECT_DIR "${GOOGLETEST_DIR}"
                                CMAKE_ARGS   ${GOOGLETEST_ARGS})

add_dependencies(fetch-bridges ${TGT_GOOGLETEST}-download)


set(HUMOTO_BRIDGE_${HUMOTO_BRIDGE}_LIBS "${HUMOTO_BRIDGES_LIBDIR}/${CMAKE_SHARED_MODULE_PREFIX}gtest${CMAKE_STATIC_LIBRARY_SUFFIX}" PARENT_SCOPE)
set(HUMOTO_BRIDGE_${HUMOTO_BRIDGE}_INCLUDES "" PARENT_SCOPE)
