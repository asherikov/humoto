<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>humoto: Implementing tasks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">humoto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Implementing tasks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#md_howto_tasks_types">Types of tasks          </a></li>
<li class="level1"><a href="#md_howto_tasks_impl">Implementation      </a></li>
<li class="level1"><a href="#md_howto_tasks_perf">Performance     </a><ul><li class="level2"><a href="#md_howto_tasks_perf_type">Choosing task type          </a></li>
<li class="level2"><a href="#md_howto_task_perf_guess">Active set guessing         </a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="md_howto_tasks_types"></a>
Types of tasks          </h1>
<p>Tasks are composed of two main elements</p>
<blockquote class="doxtable">
<ul>
<li>body &ndash; a matrix, which multiplies the vector of decision variables 'x';</li>
<li>bounds &ndash; a vector(s) which constrain result of multiplication of the body by 'x'. </li>
</ul>
</blockquote>
<p>Currently, there are four types of task bodies:</p>
<blockquote class="doxtable">
<ul>
<li><b>A*x</b> &ndash; 'x' is multiplied by a dense matrix 'A';</li>
<li><b>A*S*x</b> &ndash; a continuous segment of 'x' is selected by matrix S and then mupltiplied by a dense matrix 'A';</li>
<li><b>G*I*x</b> &ndash; a set of individual values of 'x' is selected by matrix 'I' and then each of the values is multiplied by a corresponding scalar gain stored in matrix 'G';</li>
<li><b>I*x</b> &ndash; 'I' selects values of 'x', no weighting is performed, such tasks are assumed to be satisifed exactly. </li>
</ul>
</blockquote>
<p>Note that the structured matrices 'S', 'G', 'I' are not stored or defined explicitly. Refer to the documentation of tasks to learn how to specifiy them.</p>
<p>Bounds can also be of different types: </p><blockquote class="doxtable">
<ul>
<li>(L&lt;=, &lt;=U) &ndash; lower 'L' and upper 'U' bounds are defined;</li>
<li>(&lt;=U) &ndash; only upper 'U' bound is defined;</li>
<li>(L&lt;=) &ndash; only lower 'L' bound is defined;</li>
<li>(=B) &ndash; equality task: 'B = L = U';</li>
<li>(=0) &ndash; equality task with 'B = 0'; </li>
</ul>
</blockquote>
<p>Various combinations of task bodies and bounds produce the following <a class="el" href="group__BaseTasks.html">task types</a>:</p>
<table class="doxtable">
<tr>
<th></th><th>Equality (=0) </th><th>Equality (=B) </th><th>Lower bounds (L&lt;=) </th><th>Upper bounds (&lt;=U) </th><th>Lower and upper bounds <br />
 (L&lt;=, &lt;=U)  </th></tr>
<tr>
<td><b>A*x</b> </td><td><a class="el" href="classhumoto_1_1TaskAB0.html">humoto::TaskAB0</a> </td><td><a class="el" href="classhumoto_1_1TaskAB.html">humoto::TaskAB</a> </td><td><a class="el" href="classhumoto_1_1TaskAL.html">humoto::TaskAL</a> </td><td><a class="el" href="classhumoto_1_1TaskAU.html">humoto::TaskAU</a> </td><td><a class="el" href="classhumoto_1_1TaskALU.html">humoto::TaskALU</a> </td></tr>
<tr>
<td><b>A*S*x</b> </td><td><a class="el" href="classhumoto_1_1TaskASB0.html">humoto::TaskASB0</a> </td><td><a class="el" href="classhumoto_1_1TaskASB.html">humoto::TaskASB</a> </td><td><a class="el" href="classhumoto_1_1TaskASL.html">humoto::TaskASL</a> </td><td><a class="el" href="classhumoto_1_1TaskASU.html">humoto::TaskASU</a> </td><td><a class="el" href="classhumoto_1_1TaskASLU.html">humoto::TaskASLU</a> </td></tr>
<tr>
<td><b>G*I*x</b> </td><td><a class="el" href="classhumoto_1_1TaskGIB0.html">humoto::TaskGIB0</a> </td><td><a class="el" href="classhumoto_1_1TaskGIB.html">humoto::TaskGIB</a> </td><td><a class="el" href="classhumoto_1_1TaskGIL.html">humoto::TaskGIL</a> </td><td><a class="el" href="classhumoto_1_1TaskGIU.html">humoto::TaskGIU</a> </td><td><a class="el" href="classhumoto_1_1TaskGILU.html">humoto::TaskGILU</a> </td></tr>
<tr>
<td><b>I*x</b> </td><td><a class="el" href="classhumoto_1_1TaskIB0.html">humoto::TaskIB0</a> </td><td><a class="el" href="classhumoto_1_1TaskIB.html">humoto::TaskIB</a> </td><td><a class="el" href="classhumoto_1_1TaskIL.html">humoto::TaskIL</a> </td><td><a class="el" href="classhumoto_1_1TaskIU.html">humoto::TaskIU</a> </td><td><a class="el" href="classhumoto_1_1TaskILU.html">humoto::TaskILU</a> </td></tr>
</table>
<h1><a class="anchor" id="md_howto_tasks_impl"></a>
Implementation      </h1>
<p>Each user-defined task must inherit from one of the task classes whose names are given in the table in the previous section. It is also possible to derive from one of <a class="el" href="group__PredefinedTasks.html">predefined tasks</a> instead.</p>
<p>Each user-defined task must have a unique string id (within a hierarchy) and implement method <a class="el" href="classhumoto_1_1TaskBase.html#a699df9c3829061d8534b7f5fafad98d8">humoto::TaskBase::form()</a>, which should</p>
<ul>
<li>initialize body and bounds of the task;</li>
<li>multiply generated body and bounds by the task gain.</li>
</ul>
<h1><a class="anchor" id="md_howto_tasks_perf"></a>
Performance     </h1>
<h2><a class="anchor" id="md_howto_tasks_perf_type"></a>
Choosing task type          </h2>
<p>In order to attain the highest performance it is necessary to carefully choose a parent class. While choosing a parent class the programmer should follow several principles:</p>
<ul>
<li>Pick the most specific parent class &ndash; in the table above the most specific classes are on the left and at the bottom.</li>
<li>Do not perform any task transformations manually. In particular, do not convert upper bounds to lower bounds and vice versa, do not express two-sided inequalities as constraints with only lower or upper bounds. All transformations are performed automatically when necessary.</li>
<li>If a task may change its form from one control iteration to another, pick the most specific parent class that represents all forms or implement multiple tasks.</li>
</ul>
<h2><a class="anchor" id="md_howto_task_perf_guess"></a>
Active set guessing         </h2>
<p>For the sake of performance, inequality tasks may also implement <a class="el" href="classhumoto_1_1TaskBase.html#a0e7ecffc0f098d5b9a2252957439c1f2">humoto::TaskBase::guessActiveSet()</a> method, which should generate guess of active constraints. A default implementation of this method is provided for all tasks and uses the following heuristics</p>
<ul>
<li>if the actual active set from the previous iteration is empty, mark all constraints as inactive;</li>
<li>if the actual active set from the previous iteration is not empty, copy the actual active set from the previous iteration into guessed active set using methods <a class="el" href="classhumoto_1_1TaskBase.html#a384599f0ccf269d71a384bbf4a66093a">humoto::TaskBase::getActiveSetGuess()</a> and <a class="el" href="classhumoto_1_1TaskBase.html#a5582e4617f0e70e686f9477d38d4f36c">humoto::TaskBase::getActualActiveSet()</a>.</li>
</ul>
<p>Alternatively, if you are working on an MPC problem, it is reasonable to shift the active set from the previous iteration forward by the number of constraints of the respective task in one interval, marking constraints of the last interval as inactive. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 10 2017 18:11:40 for humoto by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
